import{T as Ve,w as $e,a as We,v as Ue}from"./vue.runtime.esm-bundler-af75f279.js";import{f as Te,u as Me,h as Ce,_ as j,j as ye,k as re,l as we,n as Ee,M as Le,o as de,t as Oe,q as je,v as Re,w as Ae,x as Fe,S as ze,y as qe,z as Se,A as He,B as Ge,C as Ze,D as Pe,E as Je,F as Ke,V as xe,H as Qe}from"./index.6a0a1abd.entry.js";import{u as Xe,a as Ye,b as et}from"./index-0af072fe.js";import{storeToRefs as _e}from"./pinia.85ecdc47.entry.js";import{useI18n as le}from"./vue-i18n.0b092b2f.entry.js";import{useRouter as Ne}from"./vue-router.60d75471.entry.js";import{d as R,c as $,e as k,be as ke,w as oe,a$ as _,b0 as ne,bt as A,aS as a,a7 as h,br as l,a9 as x,H as ae,j as i,a8 as D,aa as B,aH as L,b1 as Be,u,ae as O,ba as U,aZ as se,aJ as tt,az as ot,a_ as J,aG as nt,n as at,p as st,ac as lt,aI as it,ar as rt,aV as ct,aT as ut}from"./runtime-core.esm-bundler-474556af.js";const dt=["src"],_t=R({__name:"module-bar-logo",setup(g){const{t:e}=le(),d=Te(),n=Me(),t=$(()=>{var m;return n.settings===null||!((m=n.settings)!=null&&m.project_logo)?null:`${Ce()}assets/${n.settings.project_logo}`}),o=k(!1),{queueHasItems:r}=ke(d);oe(()=>r.value,m=>{m&&(o.value=!0)});const s=$(()=>{var m;return(m=n.settings)==null?void 0:m.project_url}),v=$(()=>{var m;return(m=n.settings)!=null&&m.project_url?e("view_project"):!1});function p(){r.value===!1&&(o.value=!1)}return(m,N)=>{const M=_("v-progress-linear"),b=ne("tooltip");return A((a(),h(Be(s.value?"a":"div"),{href:s.value,target:s.value?"_blank":void 0,rel:s.value?"noopener noreferrer":void 0,class:L(["module-bar-logo",{loading:o.value}])},{default:l(()=>[t.value?(a(),x(ae,{key:0},[i(Ve,{name:"fade"},{default:l(()=>[o.value?(a(),h(M,{key:0,indeterminate:"",rounded:"",onAnimationiteration:p})):D("",!0)]),_:1}),B("img",{class:"custom-logo",src:t.value,alt:"Project Logo"},null,8,dt)],64)):(a(),x("div",{key:1,class:L(["logo",{running:o.value}]),onAnimationiteration:p},null,34))]),_:1},8,["href","target","rel","class"])),[[b,v.value,void 0,{right:!0}]])}}});const vt=j(_t,[["__scopeId","data-v-3a3b4e89"]]),pt={class:"module-bar-avatar"},mt=["src","alt"],ft=R({__name:"module-bar-avatar",setup(g){const{t:e}=le(),d=ye(),n=re(),{notificationsDrawerOpen:t}=_e(d),{unread:o}=_e(n),r=we(),s=k(!1),v=$(()=>{var b;return!r.currentUser||!("avatar"in r.currentUser)||!((b=r.currentUser)!=null&&b.avatar)?null:Ee(`${Ce()}assets/${r.currentUser.avatar.id}?key=system-medium-cover`)}),p=k(null),m=$(()=>`/users/${r.currentUser.id}`),N=$(()=>"/logout"),M=r.fullName??void 0;return(b,V)=>{const W=_("v-icon"),T=_("v-button"),E=_("v-badge"),K=_("v-card-title"),ie=_("v-card-actions"),Q=_("v-card"),X=_("v-dialog"),Z=_("v-avatar"),Y=_("router-link"),ee=_("v-hover"),F=ne("tooltip");return a(),x("div",pt,[i(E,{value:u(o),disabled:u(o)==0,class:"notifications-badge"},{default:l(()=>[A((a(),h(T,{tile:"",icon:"","x-large":"",class:"notifications",onClick:V[0]||(V[0]=H=>t.value=!0)},{default:l(()=>[i(W,{name:"notifications"})]),_:1})),[[F,u(e)("notifications"),void 0,{right:!0}]])]),_:1},8,["value","disabled"]),i(ee,null,{default:l(({hover:H})=>[i(X,{modelValue:s.value,"onUpdate:modelValue":V[2]||(V[2]=z=>s.value=z),onEsc:V[3]||(V[3]=z=>s.value=!1)},{activator:l(({on:z})=>[i(Ve,{name:"sign-out"},{default:l(()=>[H?A((a(),h(T,{key:0,tile:"",icon:"","x-large":"",class:"sign-out",onClick:z},{default:l(()=>[i(W,{name:"logout"})]),_:2},1032,["onClick"])),[[F,u(e)("sign_out"),void 0,{right:!0}]]):D("",!0)]),_:2},1024)]),default:l(()=>[i(Q,null,{default:l(()=>[i(K,null,{default:l(()=>[O(U(u(e)("sign_out_confirm")),1)]),_:1}),i(ie,null,{default:l(()=>[i(T,{secondary:"",onClick:V[1]||(V[1]=z=>s.value=!s.value)},{default:l(()=>[O(U(u(e)("cancel")),1)]),_:1}),i(T,{to:N.value},{default:l(()=>[O(U(u(e)("sign_out")),1)]),_:1},8,["to"])]),_:1})]),_:1})]),_:2},1032,["modelValue"]),i(Y,{to:m.value},{default:l(()=>[A((a(),h(Z,{tile:"",large:"",class:L({"no-avatar":!v.value})},{default:l(()=>[v.value&&!p.value?(a(),x("img",{key:0,src:v.value,alt:u(M),class:"avatar-image",onError:V[4]||(V[4]=z=>p.value=z)},null,40,mt)):(a(),h(W,{key:1,name:"account_circle"}))]),_:1},8,["class"])),[[F,u(M),void 0,{right:!0}]])]),_:1},8,["to"])]),_:1})])}}});const gt=j(ft,[["__scopeId","data-v-1d9ec22a"]]),ht={class:"module-bar"},bt={class:"modules"},yt=R({__name:"module-bar",setup(g){const e=Me(),{modules:d}=je(),n=$(()=>d.value.map(o=>o.id)),t=$(()=>e.settings?(e.settings.module_bar??Le).filter(o=>o.type==="link"?!0:o.enabled&&n.value.includes(o.id)).map(o=>{if(o.type==="link"){const s=de.omit(o,["url"]);return o.url.startsWith("/")?s.to=o.url:s.href=o.url,Oe(s)}const r=d.value.find(s=>s.id===o.id);return{...o,...d.value.find(s=>s.id===o.id),to:`/${r.id}`}}):[]);return(o,r)=>{const s=_("v-icon"),v=_("v-button"),p=ne("tooltip");return a(),x("div",ht,[i(vt),B("div",bt,[(a(!0),x(ae,null,se(t.value,m=>A((a(),h(v,{key:m.id,icon:"","x-large":"",to:m.to,href:m.href,tile:"",style:tt(m.color?{"--v-button-color-active":m.color}:null)},{default:l(()=>[i(s,{name:m.icon},null,8,["name"])]),_:2},1032,["to","href","style"])),[[p,m.name,void 0,{right:!0}]])),128))]),i(gt)])}}});const wt=j(yt,[["__scopeId","data-v-d9428515"]]),kt={class:"notification-dialogs"},$t={target:"_blank",href:"https://github.com/directus/directus/issues/new?template=bug_report.yml"},St=R({__name:"notification-dialogs",setup(g){const{t:e}=le(),d=re(),{isAdmin:n}=we(),t=$(()=>d.dialogs);function o(r){d.remove(r)}return(r,s)=>{const v=_("v-card-title"),p=_("v-error"),m=_("v-card-text"),N=_("v-button"),M=_("v-card-actions"),b=_("v-card"),V=_("v-dialog");return a(),x("div",kt,[(a(!0),x(ae,null,se(t.value,W=>(a(),h(V,{key:W.id,"model-value":"",persist:""},{default:l(()=>[i(b,{class:L([W.type])},{default:l(()=>[i(v,null,{default:l(()=>[O(U(W.title),1)]),_:2},1024),W.text||W.error?(a(),h(m,{key:0},{default:l(()=>[O(U(W.text)+" ",1),W.error?(a(),h(p,{key:0,error:W.error},null,8,["error"])):D("",!0)]),_:2},1024)):D("",!0),i(M,null,{default:l(()=>[W.type==="error"&&u(n)&&W.code==="UNKNOWN"?(a(),h(N,{key:0,secondary:""},{default:l(()=>[B("a",$t,U(u(e)("report_error")),1)]),_:1})):D("",!0),i(N,{onClick:T=>o(W.id)},{default:l(()=>[O(U(u(e)("dismiss")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024))),128))])}}});const xt=j(St,[["__scopeId","data-v-69650eae"]]),Vt={key:1,class:"content"},Wt=["onClick"],Mt={key:0,class:"message"},Ct=R({__name:"notifications-drawer",setup(g){const{t:e}=le(),d=ye(),n=we(),t=Re(),{setUnreadCount:o}=re(),r=Ne(),s=k([]),v=k(["inbox"]),p=k([]),m=k(1),N=k(25),M=k(null),b=k({}),V=k(null);oe(v,(S,w)=>{S[0]!==w[0]&&(m.value=1,s.value=[])}),oe([M,b],()=>{m.value=1});function W(S){s.value.includes(S)?s.value.splice(s.value.indexOf(S),1):s.value.push(S)}function T(S){p.value.includes(S)?p.value.splice(p.value.indexOf(S),1):p.value.push(S)}const{notificationsDrawerOpen:E}=_e(d),K=$(()=>({_and:[{recipient:{_eq:n.currentUser.id}},{status:{_eq:v.value[0]}},b.value]})),{items:ie,loading:Q,getItems:X,totalPages:Z,getItemCount:Y}=Xe(k("directus_notifications"),{filter:K,fields:k(["id","subject","message","collection","item","timestamp"]),sort:k(["-timestamp"]),search:M,limit:N,page:m}),ee=$(()=>ie.value.map(S=>{var C;let w;if(S.collection){const G=t.getCollection(S.collection);(C=G==null?void 0:G.meta)!=null&&C.singleton||!S.item?w=Ae(S.collection):w=Fe(S.collection,S.item)}else String(S.item).startsWith("/")&&(w=String(S.item));return{...S,to:w}}));async function F(){await Se.patch("/notifications",{query:{recipient:{_eq:n.currentUser.id}},data:{status:"archived"}}),await Y(),await X(),o(0)}async function H(){await Se.patch("/notifications",{keys:s.value,data:{status:v.value[0]==="inbox"?"archived":"inbox"}}),await Y(),await X(),s.value=[]}function z(S){r.push(S),E.value=!1}return(S,w)=>{const C=_("v-icon"),G=_("v-button"),ve=_("v-list-item-icon"),pe=_("v-list-item-content"),ce=_("v-tab"),me=_("v-tabs"),fe=_("v-info"),c=_("v-skeleton-loader"),f=_("v-list"),q=_("v-checkbox"),te=_("v-text-overflow"),ge=_("v-list-item"),I=_("v-pagination"),he=_("v-drawer"),ue=ne("tooltip"),Ie=ne("md");return a(),h(he,{modelValue:u(E),"onUpdate:modelValue":w[5]||(w[5]=y=>ot(E)?E.value=y:null),icon:"notifications",title:u(e)("notifications"),"sidebar-label":u(e)("folders"),onCancel:w[6]||(w[6]=y=>E.value=!1)},{actions:l(()=>[i(ze,{modelValue:M.value,"onUpdate:modelValue":w[0]||(w[0]=y=>M.value=y),filter:b.value,"onUpdate:filter":w[1]||(w[1]=y=>b.value=y),collection:"directus_notifications"},null,8,["modelValue","filter"]),A((a(),h(G,{icon:"",rounded:"",disabled:s.value.length===0,secondary:"",onClick:H},{default:l(()=>[i(C,{name:v.value[0]==="inbox"?"archive":"move_to_inbox"},null,8,["name"])]),_:1},8,["disabled"])),[[ue,v.value[0]==="inbox"?u(e)("archive"):u(e)("unarchive"),void 0,{bottom:!0}]]),v.value[0]==="inbox"?A((a(),h(G,{key:0,icon:"",rounded:"",disabled:ee.value.length===0,onClick:F},{default:l(()=>[i(C,{name:"done_all"})]),_:1},8,["disabled"])),[[ue,u(e)("archive_all"),void 0,{bottom:!0}]]):D("",!0)]),sidebar:l(()=>[i(me,{modelValue:v.value,"onUpdate:modelValue":w[2]||(w[2]=y=>v.value=y),vertical:""},{default:l(()=>[i(ce,{value:"inbox"},{default:l(()=>[i(ve,null,{default:l(()=>[i(C,{name:"inbox"})]),_:1}),i(pe,null,{default:l(()=>[O(U(u(e)("inbox")),1)]),_:1})]),_:1}),i(ce,{value:"archived"},{default:l(()=>[i(ve,null,{default:l(()=>[i(C,{name:"archive"})]),_:1}),i(pe,null,{default:l(()=>[O(U(u(e)("archive")),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),default:l(()=>[!u(Q)&&ee.value.length===0?(a(),h(fe,{key:0,icon:"notifications",title:u(e)("no_notifications"),center:""},{default:l(()=>[O(U(u(e)("no_notifications_copy")),1)]),_:1},8,["title"])):(a(),x("div",Vt,[u(Q)?(a(),h(f,{key:0,class:"notifications"},{default:l(()=>[(a(),x(ae,null,se(10,y=>i(c,{key:y,class:L({dense:u(Z)>1})},null,8,["class"])),64))]),_:1})):(a(),h(f,{key:1,class:"notifications"},{default:l(()=>[(a(!0),x(ae,null,se(ee.value,y=>(a(),h(ge,{key:y.id,block:"",dense:u(Z)>1,clickable:!!y.message,onMousedown:w[3]||(w[3]=$e(({target:P})=>V.value=P,["left","self"])),onMouseup:$e(({target:P})=>{P===V.value&&T(y.id),V.value=null},["left","self"])},{default:l(()=>[B("div",{class:"header",onClick:P=>T(y.id)},[i(q,{"model-value":s.value.includes(y.id),"onUpdate:modelValue":P=>W(y.id)},null,8,["model-value","onUpdate:modelValue"]),i(te,{class:"title",highlight:M.value,text:y.subject},null,8,["highlight","text"]),i(qe,{value:y.timestamp,type:"timestamp",relative:""},{default:l(({datetime:P})=>[i(te,{class:"datetime",text:P},null,8,["text"])]),_:2},1032,["value"]),y.to?A((a(),h(C,{key:0,clickable:"",name:"open_in_new",onClick:P=>z(y.to)},null,8,["onClick"])),[[ue,u(e)("goto_collection_content")]]):D("",!0),y.message?(a(),h(C,{key:1,clickable:"",name:p.value.includes(y.id)?"expand_less":"expand_more"},null,8,["name"])):D("",!0)],8,Wt),p.value.includes(y.id)&&y.message?A((a(),x("div",Mt,null,512)),[[Ie,y.message]]):D("",!0)]),_:2},1032,["dense","clickable","onMouseup"]))),128))]),_:1})),u(Z)>1?(a(),h(I,{key:2,modelValue:m.value,"onUpdate:modelValue":w[4]||(w[4]=y=>m.value=y),"total-visible":5,length:u(Z)},null,8,["modelValue","length"])):D("",!0)]))]),_:1},8,["modelValue","title","sidebar-label"])}}});const Nt=j(Ct,[["__scopeId","data-v-900bd3c8"]]),Bt={key:0,class:"icon"},Dt={class:"content"},It={class:"title selectable"},Ut={key:0,class:"text selectable"},Tt=R({__name:"notification-item",props:{id:{},title:{},text:{},icon:{},type:{default:"info"},tail:{type:Boolean},dense:{type:Boolean},showClose:{type:Boolean},loading:{type:Boolean},progress:{}},setup(g){const e=g,d=re();function n(){e.showClose===!0&&d.remove(e.id)}return(t,o)=>{const r=_("v-progress-circular"),s=_("v-icon");return a(),x("div",{class:L(["notification-item",[t.type,{tail:t.tail,dense:t.dense}]]),onClick:n},[t.loading||t.progress||t.icon?(a(),x("div",Bt,[t.loading?(a(),h(r,{key:0,indeterminate:"",small:""})):t.progress?(a(),h(r,{key:1,small:"",value:t.progress},null,8,["value"])):(a(),h(s,{key:2,name:t.icon},null,8,["name"]))])):D("",!0),B("div",Dt,[B("p",It,U(t.title),1),t.text?(a(),x("p",Ut,U(t.text),1)):D("",!0)]),t.showClose?(a(),h(s,{key:1,name:"close",clickable:"",class:"close",onClick:n})):D("",!0)],2)}}});const De=j(Tt,[["__scopeId","data-v-5961da01"]]),Et=R({__name:"notifications-group",props:{sidebarOpen:{type:Boolean}},setup(g){const e=re(),d=ke(e).queue;return(n,t)=>(a(),h(We,{class:L(["notifications-group",{"sidebar-open":n.sidebarOpen}]),name:"slide-fade",tag:"div"},{default:l(()=>[J(n.$slots,"default",{},void 0,!0),(a(!0),x(ae,null,se(u(d),(o,r)=>(a(),h(De,{id:o.id,key:o.id,title:o.title,icon:o.icon,type:o.type,loading:o.loading,progress:o.progress,tail:r===u(d).length-1,dense:n.sidebarOpen===!1,"show-close":o.persist===!0&&o.closeable!==!1},null,8,["id","title","icon","type","loading","progress","tail","dense","show-close"]))),128))]),_:3},8,["class"]))}});const Lt=j(Et,[["__scopeId","data-v-00758c2d"]]),Ot={class:"icon"},jt={key:0,class:"title"},Rt=R({__name:"sidebar-button",props:{to:{},icon:{default:"box"},active:{type:Boolean}},emits:["click"],setup(g){const e=ye(),{sidebarOpen:d}=ke(e);return(n,t)=>{const o=_("v-icon");return a(),h(Be(n.to?"router-link":"button"),{class:L(["sidebar-button",{active:n.active}]),onClick:t[0]||(t[0]=r=>n.$emit("click",r))},{default:l(()=>[B("div",Ot,[i(o,{name:n.icon},null,8,["name"])]),u(d)?(a(),x("div",jt,[J(n.$slots,"default",{},void 0,!0)])):D("",!0)]),_:3},8,["class"])}}});const At=j(Rt,[["__scopeId","data-v-201392bd"]]),Ft={class:"notifications-preview"},zt={key:0,class:"inline"},qt={class:"padding-box"},Ht=R({__name:"notifications-preview",props:{sidebarOpen:{type:Boolean},modelValue:{type:Boolean}},emits:["update:modelValue"],setup(g){const{t:e}=le(),d=re(),{lastFour:n}=_e(d);return(t,o)=>{const r=_("router-link"),s=_("transition-expand"),v=ne("tooltip");return a(),x("div",Ft,[i(s,{tag:"div"},{default:l(()=>[t.modelValue?(a(),x("div",zt,[B("div",qt,[i(r,{class:L(["link",{"has-items":u(n).length>0}]),to:"/activity"},{default:l(()=>[O(U(u(e)("show_all_activity")),1)]),_:1},8,["class"]),i(We,{tag:"div",name:"notification",class:"transition"},{default:l(()=>[(a(!0),x(ae,null,se(u(n),p=>(a(),h(De,nt({key:p.id},p),null,16))),128))]),_:1})])])):D("",!0)]),_:1}),A((a(),h(At,{active:t.modelValue,class:"toggle",icon:"pending_actions",onClick:o[0]||(o[0]=p=>t.$emit("update:modelValue",!t.modelValue))},{default:l(()=>[O(U(u(e)("activity_log")),1)]),_:1},8,["active"])),[[v,!t.sidebarOpen&&u(e)("activity_log"),void 0,{left:!0}]])])}}});const Gt=j(Ht,[["__scopeId","data-v-d5caca6c"]]);function Zt(g){if(typeof g!="number")throw new TypeError("Expected a number");const e=g>0?Math.floor:Math.ceil;return{days:e(g/864e5),hours:e(g/36e5)%24,minutes:e(g/6e4)%60,seconds:e(g/1e3)%60,milliseconds:e(g)%1e3,microseconds:e(g*1e3)%1e3,nanoseconds:e(g*1e6)%1e3}}const Pt=(g,e)=>e===1?g:`${g}s`,Jt=1e-7;function be(g,e={}){if(!Number.isFinite(g))throw new TypeError("Expected a finite number");e.colonNotation&&(e.compact=!1,e.formatSubMilliseconds=!1,e.separateMilliseconds=!1,e.verbose=!1),e.compact&&(e.secondsDecimalDigits=0,e.millisecondsDecimalDigits=0);const d=[],n=(r,s)=>{const v=Math.floor(r*10**s+Jt);return(Math.round(v)/10**s).toFixed(s)},t=(r,s,v,p)=>{if((d.length===0||!e.colonNotation)&&r===0&&!(e.colonNotation&&v==="m"))return;p=(p||r||"0").toString();let m,N;if(e.colonNotation){m=d.length>0?":":"",N="";const M=p.includes(".")?p.split(".")[0].length:p.length,b=d.length>0?2:1;p="0".repeat(Math.max(0,b-M))+p}else m="",N=e.verbose?" "+Pt(s,r):v;d.push(m+p+N)},o=Zt(g);if(t(Math.trunc(o.days/365),"year","y"),t(o.days%365,"day","d"),t(o.hours,"hour","h"),t(o.minutes,"minute","m"),e.separateMilliseconds||e.formatSubMilliseconds||!e.colonNotation&&g<1e3)if(t(o.seconds,"second","s"),e.formatSubMilliseconds)t(o.milliseconds,"millisecond","ms"),t(o.microseconds,"microsecond","Âµs"),t(o.nanoseconds,"nanosecond","ns");else{const r=o.milliseconds+o.microseconds/1e3+o.nanoseconds/1e6,s=typeof e.millisecondsDecimalDigits=="number"?e.millisecondsDecimalDigits:0,v=r>=1?Math.round(r):Math.ceil(r),p=s?r.toFixed(s):v;t(Number.parseFloat(p),"millisecond","ms",p)}else{const r=g/1e3%60,s=typeof e.secondsDecimalDigits=="number"?e.secondsDecimalDigits:1,v=n(r,s),p=e.keepDecimalsOnWholeSeconds?v:v.replace(/\.0+$/,"");t(Number.parseFloat(p),"second","s",p)}if(d.length===0)return"0"+(e.verbose?" milliseconds":"ms");if(e.compact)return d[0];if(typeof e.unitCount=="number"){const r=e.colonNotation?"":" ";return d.slice(0,Math.max(e.unitCount,1)).join(r)}return e.colonNotation?d.join(""):d.join(" ")}const Kt={class:"latency-indicator"},Qt=R({__name:"latency-indicator",setup(g){const{t:e}=le(),d=He(),n=$(()=>{const v=de.sortBy(d.latency,["timestamp"]);return v[v.length-1]}),t=$(()=>{if(!d.latency||d.latency.length===0)return 0;const v=de.sortBy(d.latency,["timestamp"]),p=v.slice(Math.max(v.length-5,0));let m=0;for(const{latency:N}of p)m+=N;return Math.round(m/p.length)}),o=$(()=>t.value<=250?4:t.value>250&&t.value<=500?3:t.value>500&&t.value<=750?2:1),r=$(()=>{switch(o.value){case 4:return`${e("connection_excellent")}
(${be(t.value)} ${e("latency")})`;case 3:return`${e("connection_good")}
(${be(t.value)} ${e("latency")})`;case 2:return`${e("connection_fair")}
(${be(t.value)} ${e("latency")})`;case 1:return`${e("connection_poor")}
(${be(t.value)} ${e("latency")})`;default:return null}}),s=$(()=>{switch(o.value){case 4:return"signal_wifi_4_bar";case 3:return"signal_wifi_3_bar";case 2:return"signal_wifi_2_bar";case 1:return"signal_wifi_1_bar";default:return null}});return(v,p)=>{const m=_("v-progress-circular"),N=_("v-icon"),M=ne("tooltip");return A((a(),x("div",Kt,[n.value?(a(),h(N,{key:1,name:s.value},null,8,["name"])):(a(),h(m,{key:0,indeterminate:""}))])),[[M,r.value,void 0,{bottom:!0,end:!0}]])}}});const Xt=j(Qt,[["__scopeId","data-v-93933dfa"]]),Yt={class:"project-info"},eo={class:"name-container"},to=R({__name:"project-info",setup(g){const e=Ge(),d=$(()=>{var t,o;return(o=(t=e.info)==null?void 0:t.project)==null?void 0:o.project_name}),n=$(()=>{var t,o;return(o=(t=e.info)==null?void 0:t.project)==null?void 0:o.project_descriptor});return(t,o)=>{const r=_("v-text-overflow");return a(),x("div",Yt,[i(Xt),B("div",eo,[i(r,{placement:"right",class:"name",text:d.value},null,8,["text"]),n.value?(a(),h(r,{key:0,placement:"right",class:"descriptor",text:n.value},null,8,["text"])):D("",!0)])])}}});const oo=j(to,[["__scopeId","data-v-142557c9"]]),no=R({__name:"sidebar-detail-group",props:{sidebarOpen:{type:Boolean}},setup(g){const e=g,d=k([]),n=k(!1);return oe(()=>e.sidebarOpen,async t=>{t===!1?d.value=[]:(n.value=!0,await at(),n.value=!1)}),(t,o)=>{const r=_("v-item-group");return a(),h(r,{modelValue:d.value,"onUpdate:modelValue":o[0]||(o[0]=s=>d.value=s),class:"sidebar-detail-group",scope:"sidebar-detail",mandatory:n.value},{default:l(()=>[J(t.$slots,"default",{},void 0,!0)]),_:3},8,["modelValue","mandatory"])}}});const ao=j(no,[["__scopeId","data-v-c29ab8d0"]]),so=g=>(ct("data-v-604b15c7"),g=g(),ut(),g),lo={class:"module-nav alt-colors"},io={class:"module-nav-content"},ro={class:"content-wrapper"},co={class:"flex-container"},uo=so(()=>B("div",{class:"spacer"},null,-1)),_o=R({__name:"private-view",props:{title:{default:null},smallHeader:{type:Boolean},headerShadow:{type:Boolean,default:!0},splitView:{type:Boolean},splitViewMinWidth:{default:0},sidebarShadow:{type:Boolean}},emits:["update:splitView"],setup(g,{emit:e}){var me,fe;const d=g,n={moduleBarWidth:60,minModuleNavWidth:220,minContentWidth:590,collapsedSidebarWidth:60,overlaySpace:60},{t}=le(),o=Ne(),{title:r}=ke(d),s=Ye(d,"splitView",e),v=k(),p=k(),m=k();let N;const M=()=>{var c;clearTimeout(N),(c=v.value)==null||c.classList.remove("hide-overflow-x")};oe(s,()=>{if(!v.value||!p.value)return;v.value.classList.add("hide-overflow-x","hide-overflow-y"),N=setTimeout(M,1500);let c,f;const q=()=>{var te;clearTimeout(c),f==null||f(),(te=v.value)==null||te.classList.remove("hide-overflow-y")};c=setTimeout(q,1500),f=Ze(p.value,"transitionend",q)});const{width:b}=Pe(),{width:V}=et(m),W=$(()=>{if(!s.value)return!0;let c;return b.value>=1260?c=b.value-n.moduleBarWidth-n.minModuleNavWidth-n.minContentWidth-V.value:b.value>=960?c=b.value-n.moduleBarWidth-n.minModuleNavWidth-n.minContentWidth-n.collapsedSidebarWidth:c=b.value-n.minContentWidth,c>=d.splitViewMinWidth}),{data:T}=Je("module-width",{}),E=k(ce((me=T.value)==null?void 0:me.nav,n.minModuleNavWidth));oe(E,de.debounce(c=>{T.value={...T.value??{},nav:c}},300));const K=k(ce((fe=T.value)==null?void 0:fe.main,n.minContentWidth));oe(K,de.debounce(c=>{T.value={...T.value??{},main:c}},300));const ie=k(!1),Q=$(()=>{const c=s.value?d.splitViewMinWidth:0,f=W.value?n.minContentWidth+c:n.minContentWidth;let q;return b.value>=1260?q=b.value-n.moduleBarWidth-f-V.value:b.value>=960?q=b.value-n.moduleBarWidth-f-n.collapsedSidebarWidth:q=b.value-n.moduleBarWidth+n.overlaySpace,Math.max(q,n.minModuleNavWidth)}),X=$(()=>{const c=s.value?d.splitViewMinWidth:0;let f;return b.value>=1260?f=b.value-n.moduleBarWidth-E.value-c-V.value:b.value>=960?f=b.value-n.moduleBarWidth-E.value-c-n.collapsedSidebarWidth:f=b.value-c,Math.max(f,n.minContentWidth)}),Z=$(()=>({snapZones:[{width:40,snapPos:n.minModuleNavWidth,direction:"left"},{width:40,snapPos:Q.value,direction:"right"}]})),Y=k(!1),ee=$(()=>({snapZones:[{width:40,snapPos:n.minContentWidth,direction:"left"},{width:40,snapPos:X.value,direction:"right"}],alwaysShowHandle:!0,disableTransition:ie.value})),F=k(!1),H=we(),z=ye(),S=$(()=>{var c,f;return H.currentUser?((f=(c=H.currentUser)==null?void 0:c.role)==null?void 0:f.app_access)||!1:!0}),w=k(!1),{sidebarOpen:C,fullScreen:G}=_e(z),ve=$(()=>H.currentUser&&"appearance"in H.currentUser?H.currentUser.appearance:"auto");st("main-element",v),o.afterEach(()=>{var c;(c=v.value)==null||c.scrollTo({top:0}),G.value=!1}),Ke({title:r});function pe(c){c.target&&c.target.classList.contains("close")===!1&&(C.value=!0)}function ce(c,f){return c&&!Number.isNaN(c)?Number(c):f}return(c,f)=>{const q=_("v-button"),te=_("v-info"),ge=_("v-overlay");return S.value===!1?(a(),h(te,{key:0,center:"",title:u(t)("no_app_access"),type:"danger",icon:"block"},{append:l(()=>[i(q,{to:"/logout"},{default:l(()=>[O(U(u(t)("switch_user")),1)]),_:1})]),default:l(()=>[O(U(u(t)("no_app_access_copy"))+" ",1)]),_:1},8,["title"])):(a(),x("div",{key:1,class:L(["private-view",{appearance:ve.value,"full-screen":u(G),splitView:c.splitView}])},[B("aside",{id:"navigation",role:"navigation","aria-label":"Module Navigation",class:L({"is-open":F.value,"has-shadow":c.sidebarShadow})},[i(wt),i(xe,{width:E.value,"onUpdate:width":f[0]||(f[0]=I=>E.value=I),"min-width":n.minModuleNavWidth,"max-width":Q.value,options:Z.value,onDragging:f[1]||(f[1]=I=>ie.value=I),onTransitionEnd:M},{default:l(()=>[B("div",lo,[i(oo),B("div",io,[J(c.$slots,"navigation",{},void 0,!0)])])]),_:3},8,["width","min-width","max-width","options"])],2),B("div",{id:"main-content",ref_key:"contentEl",ref:v,class:"content"},[i(Qe,{ref_key:"headerBarEl",ref:p,small:c.smallHeader||c.splitView,shadow:c.headerShadow||c.splitView,"show-sidebar-toggle":"",title:u(r),"onToggle:sidebar":f[2]||(f[2]=I=>C.value=!u(C)),onPrimary:f[3]||(f[3]=I=>F.value=!F.value)},lt({_:2},[se(c.$slots,(I,he)=>({name:he,fn:l(ue=>[J(c.$slots,he,it(rt(ue)),void 0,!0)])}))]),1032,["small","shadow","title"]),B("div",ro,[i(xe,{width:K.value,"onUpdate:width":f[4]||(f[4]=I=>K.value=I),"min-width":n.minContentWidth,"max-width":X.value,disabled:!u(s),options:ee.value,onDragging:f[5]||(f[5]=I=>Y.value=I)},{default:l(()=>[A(B("main",null,[J(c.$slots,"default",{},void 0,!0)],512),[[Ue,W.value]])]),_:3},8,["width","min-width","max-width","disabled","options"]),c.splitView?(a(),x("div",{key:0,id:"split-content",class:L({"is-dragging":Y.value})},[J(c.$slots,"splitView",{},void 0,!0)],2)):D("",!0)])],512),B("aside",{id:"sidebar",ref_key:"sidebarEl",ref:m,role:"contentinfo",class:L(["alt-colors",{"is-open":u(C),"has-shadow":c.sidebarShadow}]),"aria-label":"Module Sidebar",onClick:pe},[B("div",co,[i(ao,{"sidebar-open":u(C)},{default:l(()=>[J(c.$slots,"sidebar",{},void 0,!0)]),_:3},8,["sidebar-open"]),uo,i(Gt,{modelValue:w.value,"onUpdate:modelValue":f[6]||(f[6]=I=>w.value=I),"sidebar-open":u(C)},null,8,["modelValue","sidebar-open"])])],2),i(ge,{class:"nav-overlay",active:F.value,onClick:f[7]||(f[7]=I=>F.value=!1)},null,8,["active"]),i(ge,{class:"sidebar-overlay",active:u(C),onClick:f[8]||(f[8]=I=>C.value=!1)},null,8,["active"]),i(Nt),w.value===!1?(a(),h(Lt,{key:0,"sidebar-open":u(C)},null,8,["sidebar-open"])):D("",!0),i(xt)],2))}}});const yo=j(_o,[["__scopeId","data-v-604b15c7"]]);export{yo as PrivateView,yo as default};
